<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CutCut</title>
    <!-- bulma css -->
    <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css'>
    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
    
    <!-- fabric.js -->
    <!-- changed to import -->
    <!-- <script src='/js/fabric.min.js'></script> -->

    <!-- cropper.js styles -->
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.6/cropper.min.css'>
    <!-- script changed to import in files -->
    <!-- <script src='https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.6/cropper.min.js'></script> -->
    
    <!-- if we need polyfill for custom elements -->
    <!-- https://github.com/webcomponents/polyfills/tree/master/packages/custom-elements -->
    <script src='/js/webcomponents/custom-canvas.ts'></script>
    <script src='/js/webcomponents/custom-cropper.ts'></script>
    <script src='/js/webcomponents/custom-eraser.ts'></script>
    <script async src="index.ts"></script>
  </head>
    
  <body>
    <section>
      <div class='container'>
        <div id='app'></div>
      </div>
    </section>
    <script>
      window.fetch(`https://api.telegram.org/bot${process.env.TELEGRAM_BOT_TOKEN}/getMe`)
        .then(botDataResponse => botDataResponse.json())
        .then(bot => {
          const botId = bot.result.id;
          console.log(botId)

          window.fetch(`https://api.telegram.org/bot${process.env.TELEGRAM_BOT_TOKEN}/createNewStickerSet`, {
            method: 'POST',
            headers: {
              'Accept': 'application/json',
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({
              user_id: process.env.TELEGRAM_USER_ID,
              name: 'firstpack_by_cutcutelm_bot',
              title: '1st pack by CutCut',
              emojis: 'not_ready_yet',
              png_sticker: 'https://i.ya-webdesign.com/images/512x512-png-images-11.png',
            })
          })
          .then(stickerResponse => stickerResponse.json())
          .then(stickerSet => console.log(stickerSet));
        });
      
    </script>
  </body>
</html>
